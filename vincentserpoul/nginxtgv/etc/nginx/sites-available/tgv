server {
    listen 80;
    listen [::]:80 ipv6only=on;

    access_log /var/log/nginx/tgv.com-access.log main;
    error_log  /var/log/nginx/tgv.com-error.log;

    pagespeed on;

    # Needs to exist and be writable by nginx.  Use tmpfs for best performance.
    pagespeed FileCachePath /var/ngx_pagespeed_cache;

    # Ensure requests for pagespeed optimized resources go to the pagespeed handler
    # and no extraneous headers get set.
    location ~ "\.pagespeed\.([a-z]\.)?[a-z]{2}\.[^.]{10}\.[^.]+" {
      add_header "" "";
    }
    location ~ "^/pagespeed_static/" { }
    location ~ "^/ngx_pagespeed_beacon$" { }

    location /demo {
        proxy_pass  http://tgv:8080;
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    ## Images and static content is treated different
    location ~* ^.+.(jpg|jpeg|gif|css|png|js|ico)$ {
        access_log        off;
        root /templates;
        expires 30d;
        add_header Pragma public;
        add_header Cache-Control "public";
    }

}
